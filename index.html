<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuestionario Aleatorio</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        form {
            background-color: #fff;
            padding: 20px;
            margin: 0 auto;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 600px;
        }
        .pregunta {
            margin-bottom: 40px; /* Aumenta la separación entre las preguntas */
        }
        .pregunta p {
            font-weight: bold;
            margin-bottom: 20px; /* Aumenta la separación entre el texto de la pregunta y las opciones */
            color: #555;
        }
        label {
            display: block;
            margin-bottom: 15px; /* Aumenta la separación entre las alternativas */
            padding-left: 10px;
        }
        input[type="radio"] {
            margin-right: 10px;
        }
        button {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .correcta {
            color: green;
            font-weight: bold;
        }
        .incorrecta {
            color: red;
            font-weight: bold;
        }
        .resultado {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
        }
        .correcta.resultado {
            background-color: #d4edda;
            color: #155724;
        }
        .incorrecta.resultado {
            background-color: #f8d7da;
            color: #721c24;
        }
        .respuesta-correcta {
            background-color: #f1fcdc; /* Fondo verde sutil */
            border-radius: 5px;
            padding: 5px;
        }
        .selector-preguntas {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }

        .selector-preguntas label {
            margin-right: 10px;
            font-weight: bold;
        }

        .selector-preguntas select {
            padding: 5px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

    </style>
</head>
<body>

<h1>Cuestionario</h1>
<div class="selector-preguntas">
    <label for="numPreguntas">Número de preguntas: </label>
    <select id="numPreguntas" onchange="cargarPreguntas()">
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="15">15</option>
        <option value="20">20</option>
        <option value="todas" selected>Todas</option>
    </select>
</div>

<form id="cuestionario">
    <div id="preguntas"></div>
    <button type="button" onclick="validarRespuestas()">Validar Respuestas</button>
    <div id="resultados"></div>
</form>

<script>
    const preguntas = [
        {
            pregunta: "Usted va por una calle de doble sentido de tránsito. Para virar a la izquierda, ¿dónde debería ubicarse?",
            opciones: ["Justo a la izquierda de la línea de centro de calzada", "Lo más a la derecha posible", "Justo a la derecha de la línea de centro de calzada"],
            correcta: 2
        },
        {
            pregunta: "Si a usted le realizan una prueba de alcoholemia y ha estado fumando, ¿le puede afectar el hecho de haber fumado en el resultado de la prueba?",
            opciones: ["Depende de la ingesta.", "Si", "No"],
            correcta: 2
        },
        {
            pregunta: "¿Qué precaución se debe tomar para conducir por una calzada cubierta con nieve?",
            opciones: ["Acelerar solo en las partes rectas, frenar antes de cada curva, para evitar la pérdida de control del vehículo.", "Evitar frenadas aceleradas, manteniendo una velocidad baja en el cambio más alto posible, para evitar que las ruedas patinen.", "Conducir siempre en la primera relación de marchas, porque al ser la más potente, el conductor podrá mantener el control del vehículo."],
            correcta: 1
        },
        {
            pregunta: "Con respecto al funcionamiento del vehículo, ¿qué afirmación es verdadera?",
            opciones: ["Casi siempre, el motor se enfría con un líquido refrigerante que circula por canales en el bloque del motor.", "Cuando el motor está siendo lubricado se enciende una luz testigo en el panel de instrumentos del vehículo", "Una batería mal cargada hace que el vehículo tenga un mejor arranque"],
            correcta: 0
        },
        {
            pregunta: "¿Cuál de estas afirmaciones es FALSA tratándose de conducción con niebla?",
            opciones: ["Con niebla se reduce la visibilidad", "Con niebla se aumenta la adherencia de los neumáticos.", "Con niebla existe el mismo peligro que cuando comienza a llover."],
            correcta: 1
        },
        {
            pregunta: "Al momento de un adelantamiento de un vehículo de grandes dimensiones, ¿dónde debe tener especial cuidado?",
            opciones: ["Al acceder y al salir de la sombra de viento que le proporcionará dicho vehículo durante la maniobra", "Detrás del vehículo de grandes dimensiones", "Al regresar a la pista"],
            correcta: 0
        },
        {
            pregunta: "En caso de un accidente vehicular, ¿el seguro obligatorio de accidentes personales cubre los daños a los vehículos involucrados?",
            opciones: ["No, pues solo ampara los riesgos de muerte y lesiones de las personas a consecuencia del accidente.", "Sí, hasta un 25% de los daños siempre y cuando se deje la constancia respectiva en la unidad policial más cercana al lugar del accidente.", "Sí, hasta un 50% de los daños siempre y cuando se deje la constancia respectiva en la unidad policial más cercana al lugar del accidente"],
            correcta: 0
        },
        {
            pregunta: "La sanción por participar en un siniestro de tránsito sin daños ni lesiones y huir del lugar es:",
            opciones: ["Una multa de 1 UTM.", "Una multa de 3 a 7 UTM y suspensión de la licencia de conductor hasta por 1 mes.", "Una multa de 1 a 3 UTM"],
            correcta: 1
        },
        {
            pregunta: "Si se duplica la velocidad del vehículo, ¿en qué proporción aumenta la distancia de frenado requerida?",
            opciones: ["6 veces.", "9 veces.", "4 veces."],
            correcta: 2
        },
        {
            pregunta: "Además de la luz roja de un semáforo, ¿qué otra luz obliga a detenerse a los vehículos antes de entrar en un cruce?",
            opciones: [" Luz amarilla intermitente.", "Luz roja intermitente.", "Luz amarilla no intermitente."],
            correcta: 2
        },
        {
            pregunta: "El efecto después de fumar pasta base es rápido e intenso, aparece en un lapso de segundos y dura algunos minutos",
            opciones: ["Verdadero.", "Falso."],
            correcta: 0
        },
        {
            pregunta: "¿Cuál de las siguientes opciones NO corresponde a una infracción gravísima?",
            opciones: ["No respetar una señal PARE.", "No respetar la luz roja de un semáforo.", "No respetar el derecho preferente de un peatón"],
            correcta: 2
        },
        {
            pregunta: "¿Qué color de casco es menos recomendable para disminuir accidentes de tránsito?",
            opciones: ["Rojo.", "Café oscuro.", "Blanco"],
            correcta: 1
        },
        {
            pregunta: "Si el derrape es fuerte, como norma general:",
            opciones: ["No debe frenar ni desembragar", "Gire el volante hacia el lado al que NO se derrapan las ruedas traseras", "Levante el pie del acelerador"],
            correcta: 0
        },
        {
            pregunta: "Si una copa de vino arroja de promedio un porcentaje de concentración de alcohol de 0,40 g/l, ¿cuál será su estado al beber una copa de vino?",
            opciones: ["Quedará bajo el criterio del carabinero que lo fiscaliza y su posibilidad de sufrir un accidente aumentará el triple.", "Bajo la influencia del alcohol y su posibilidad de sufrir un siniestro aumentará al doble.", "En estado de ebriedad y la posibilidad de sufrir un siniestro aumentará 5 veces."],
            correcta: 1
        },
        {
            pregunta: "¿Cuán mayor puede ser el riesgo de accidente para un conductor que presenta una tasa de alcohol en la sangre entre 0,3 y 0,5 g/l?",
            opciones: ["El riesgo de accidente con esa cantidad de alcohol en la sangre es cinco veces más que si no hubiera bebido.", "El riesgo de accidente con esa cantidad de alcohol en la sangre es el doble que si no hubiera bebido.", "No hay riesgo de accidente porque esa cantidad no afecta en los sentidos de la persona para conducir."],
            correcta: 1
        },
        {
            pregunta: "¿Cuál de las siguientes afirmaciones NO corresponde a las alteraciones de movimiento con respecto a la fatiga en el conductor?",
            opciones: ["Menor tiempo de reacción.","Aparecen movimientos indicadores de fatiga: cambios de postura frecuentes, estiramientos, bostezos, constantes acomodos en el asiento, movimientos de las manos (como rascarse) o las llamadas conductas lúdicas (como cantar, silbar o dar golpecitos rítmicos en el tablero).", "Serán más lentos e imprecisos.", "Disminuye el número de maniobras realizadas, por ejemplo, se corregirá la trayectoria menos veces. "],
            correcta: 0
        },
        {
            pregunta: "De las siguientes capacidades de un individuo, ¿cuál o cuáles de ellas NO se ve afectada por el consumo de alcohol?",
            opciones: ["El juicio acerca de la velocidad.", "Los tiempos de reacción.", "Ninguna de las mencionadas.", "La coordinación"],
            correcta: 2
        },
        {
            pregunta: "Una persona va conduciendo a 50 km/h por un camino de asfalto plano, con buenas condiciones climáticas y en un vehículo con neumáticos y frenos en buen estado. En estas circunstancias, ¿aproximadamente cuánto se demora el conductor en detener su vehículo?",
            opciones: ["15 metros.", "65 metros.", "35 metros."],
            correcta: 2
        },
        {
            pregunta: "¿Qué significan las tachas rojas al costado de la vía?",
            opciones: ["Precaución.", "Estacionamiento.", "Peligro, no deben ser cruzadas."],
            correcta: 2
        },
        {
            pregunta: "¿Qué efectos producen el sueño al conducir?",
            opciones: ["(Microsueños). Ocurren muchos accidentes por esta causa, ya que suelen pasar inadvertidos.", "Disminución de la capacidad de reacción (aumenta el tiempo de reacción) y de percepción (se precisan estímulos más altos).", "Visión borrosa, fatiga ocular y mayor sensibilidad al deslumbramiento.", "Todas las mencionadas."],
            correcta: 3
        },
        {
            pregunta: "Usted va a 70 km/h. Aproximadamente, ¿qué distancia recorrerá su vehículo desde el momento en que usted se percata de un peligro que hay más adelante hasta que comienza a frenar?",
            opciones: ["Unos 8 metros.", "Unos 20 metros.", "Unos 5 metros."],
            correcta: 1
        }
    ];

    let preguntasMezcladas = [];

    

    // Función para mezclar las preguntas
    function mezclar(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]]; // Intercambiar elementos
        }
        return array;
    }


    // Validar las respuestas
    function validarRespuestas() {
        let correctas = 0;
        let incorrectas = 0;

        preguntasMezcladas.forEach((pregunta, index) => {
            const opciones = document.getElementsByName(`pregunta${index}`);
            let seleccionada = -1;

            // Revisar cuál opción fue seleccionada
            for (let i = 0; i < opciones.length; i++) {
                if (opciones[i].checked) {
                    seleccionada = parseInt(opciones[i].value);
                    break;
                }
            }

            const resultado = document.createElement("p");
            if (seleccionada === pregunta.correcta) {
                resultado.textContent = "Respuesta correcta";
                resultado.className = "correcta resultado";
                correctas++;
            } else {
                resultado.textContent = "Respuesta incorrecta";
                resultado.className = "incorrecta resultado";
                incorrectas++;

                // Resaltar la respuesta correcta si la respuesta fue incorrecta
                opciones[pregunta.correcta].parentElement.classList.add("respuesta-correcta");
            }

            // Mostrar el resultado en la interfaz
            document.getElementsByTagName("div")[index + 1].appendChild(resultado); // Index + 1 por el div de preguntas
        });

        // Mostrar los resultados finales
        const contenedorResultados = document.getElementById("resultados");
        contenedorResultados.innerHTML = `
            <p class="correcta">Respuestas correctas: ${correctas}</p>
            <p class="incorrecta">Respuestas incorrectas: ${incorrectas}</p>
        `;
    }

    // Función para cargar el número de preguntas seleccionadas
    function cargarPreguntas() {
        const selectElement = document.getElementById("numPreguntas");
        const numPreguntasSeleccionadas = selectElement.value === "todas" ? preguntas.length : parseInt(selectElement.value);

        // Mezclar y seleccionar las primeras 'numPreguntasSeleccionadas' preguntas
        preguntasMezcladas = mezclar([...preguntas]).slice(0, numPreguntasSeleccionadas);

        // Limpiar el contenedor de preguntas antes de cargar nuevas
        const contenedorPreguntas = document.getElementById("preguntas");
        contenedorPreguntas.innerHTML = ""; 

        // Generar el cuestionario con el número de preguntas seleccionadas
        preguntasMezcladas.forEach((pregunta, index) => {
            const divPregunta = document.createElement("div");
            divPregunta.className = "pregunta";
            divPregunta.innerHTML = `<p><strong style='color:black;font-weight:bold'>${index + 1}:</strong> ${pregunta.pregunta}</p>`;

            pregunta.opciones.forEach((opcion, i) => {
                const opcionHtml = `
                    <label>
                        <input type="radio" name="pregunta${index}" value="${i}">
                        ${opcion}
                    </label><br>
                `;
                divPregunta.innerHTML += opcionHtml;
            });

            contenedorPreguntas.appendChild(divPregunta);
        });
    }

    // Ejecutar la función al cargar la página para que el cuestionario se cargue según el valor predeterminado del combobox
    window.onload = cargarPreguntas;




    //window.onload = generarCuestionario;
</script>

</body>
</html>
